# üåê PyMiniHTTP ‚Äî –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Python
---
## üöß –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç **–µ—â—ë –Ω–µ –∑–∞–≤–µ—Ä—à—ë–Ω** –∏ –±—É–¥–µ—Ç **–∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è**:

- üîú –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- üîê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ edge-case'–æ–≤
- üåç –†–∞–±–æ—Ç–∞ —Å –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏ –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- üï∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `Keep-Alive`, `Range`, `ETag` –∏ –¥—Ä.
---
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ–π HTTP-—Å–µ—Ä–≤–µ—Ä, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –±–∞–∑–æ–≤—ã–µ HTTP-–º–µ—Ç–æ–¥—ã (`GET`, `HEAD`, `POST`, `PUT`, `DELETE`), gzip-—Å–∂–∞—Ç–∏–µ, —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é HTML-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```
python3 server.py --directory ./files
```

üìÇ –ü–∞—Ä–∞–º–µ—Ç—Ä --directory —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–µ–∫—É—â–∞—è .).

## üîå –°–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç:

–ü–æ—Ä—Ç: 4221
–•–æ—Å—Ç: localhost

## üîß –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

| –ú–µ—Ç–æ–¥  | –ü—É—Ç—å                   | –û–ø–∏—Å–∞–Ω–∏–µ                                               |
|--------|------------------------|--------------------------------------------------------|
| GET    | `/`                    | –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç 200 OK                                    |
| GET    | `/echo/<msg>`          | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `<msg>`                                     |
| GET    | `/user-agent`          | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç User-Agent –∫–ª–∏–µ–Ω—Ç–∞                          |
| GET    | `/files/<filename>`    | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞                            |
| GET    | `/static/<path>`       | –û—Ç–¥–∞—ë—Ç —Ñ–∞–π–ª –∏–ª–∏ HTML-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é                        |
| POST   | `/files/<filename>`    | –°–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞                 |
| PUT    | `/files/<filename>`    | –û–±–Ω–æ–≤–ª—è–µ—Ç —Ñ–∞–π–ª —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞               |
| DELETE | `/files/<filename>`    | –£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª                                           |
| HEAD   | –ª—é–±–æ–π                  | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞, –±–µ–∑ —Ç–µ–ª–∞           |
| ANY    | –Ω–µ—Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç | –û—Ç–≤–µ—Ç 404 Not Found –∏–ª–∏ 405 Method Not Allowed         |

## üì¶ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* üìÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HTML-–ª–∏—Å—Ç–∏–Ω–≥–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ /static/*
* üí® Gzip-—Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É–∫–∞–∑–∞–ª Accept-Encoding: gzip
* üßµ –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å ‚Äî –∫–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º thread
* üóÉ –†–∞–∑–º–µ—Ä –∏ –¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ HTML-–ª–∏—Å—Ç–∏–Ω–≥–µ
* üîÅ –ß—Ç–µ–Ω–∏–µ —Ç–µ–ª–∞ –ø—Ä–∏ POST, PUT, –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤ —Ñ–∞–π–ª


## üß™ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤


### GET /echo/hello
```
curl http://localhost:4221/echo/hello
```
–í—ã–≤–æ–¥: hello

### GET /user-agent
```
curl http://localhost:4221/user-agent
```
–í—ã–≤–æ–¥: curl/8.0.1

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
```
curl -X POST --data-binary @myfile.txt http://localhost:4221/
files/upload.txt
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
```
curl -X DELETE http://localhost:4221/files/upload.txt
```

### HTML-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```
curl http://localhost:4221/static/
```



## üìå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
#### –¢–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python:

* socket
* threading
* argparse
* os, gzip, time




